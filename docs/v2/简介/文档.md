# ğŸŒŸ å®šåˆ¶åŒ– Docsify æ–‡æ¡£æ¡†æ¶å®æˆ˜åˆ†äº«

åœ¨æ„å»ºå‰ç«¯æ–‡æ¡£å¹³å°æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æ‹¥æœ‰æ›´å‹å¥½çš„ç”¨æˆ·ç•Œé¢ã€ä¾¿æ·çš„æœç´¢ã€æ¸…æ™°çš„ç›®å½•å¯¼èˆªä»¥åŠå®ç”¨çš„ä»£ç å¤åˆ¶åŠŸèƒ½ã€‚å€ŸåŠ© [Docsify](https://docsify.js.org/)ï¼Œæˆ‘å®ç°äº†ä»¥ä¸‹å‡ ä¸ªæ–¹é¢çš„å®šåˆ¶ä¼˜åŒ–ï¼Œåˆ†äº«ç»™å¤§å®¶ ğŸ™Œã€‚

> ğŸ“Œ æœ¬æ–‡åŸºäº Docsify + æ’ä»¶å®ç°ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ JavaScript åŠŸèƒ½æ³¨å…¥ä¸æ ·å¼ä¼˜åŒ–ã€‚

## ğŸ¨ UI ç•Œé¢æ”¹é€ 

ä»¿ CSDN å¸ƒå±€æ¨¡å¼åŠ UIï¼Œå»é™¤å·¦ä¾§èœå•æ”¶å±•ï¼Œå·¦ä¾§èœå•åªå±•ç¤ºæ–‡æ¡£ç›®å½•ï¼Œå³ä¾§å¢åŠ æœç´¢åŠæ–‡æ¡£å†…å®¹ç›®å½•ï¼Œæ•´ä½“çœ‹ä¸Šå»æ›´ç®€æ´ç‚¹ï¼Œå½“ç„¶ä½ å¯ä»¥éšæ„æ”¹ä½ å–œæ¬¢çš„æ ·å¼ï¼›

**åŸå§‹ UI**
![å¸ƒå±€](../../../images/layout1.png)

**æ”¹é€ å UI**
![å¸ƒå±€](../../../images/layout.png)

## ğŸ« ç‰ˆæœ¬æ§åˆ¶

é€šè¿‡åŠ¨æ€æ›´æ”¹æ–‡æ¡£èµ„æºæ ¹è·¯å¾„å®ç°æ–‡æ¡£ç‰ˆæœ¬åˆ‡æ¢ï¼›

**é…ç½®ï¼š**

```javascript
 basePath: sessionStorage.getItem("version") || "/docs/v1",
```

**HTML å®ç°ï¼š**

```html
<div class="versionBox">
  <label for="version">ç‰ˆæœ¬:</label>
  <select id="version" name="version" onchange="changeBasePath(this)">
    <option value="a">v1</option>
    <option value="b">v2</option>
  </select>
</div>
```

**JS ï¼š**

```javascript
function changeBasePath(select) {
  var selectedValue = select.value;
  if (selectedValue === "a") {
    sessionStorage.setItem("version", "/docs/v1");
    sessionStorage.setItem("ver", "a");
  } else if (selectedValue === "b") {
    sessionStorage.setItem("version", "/docs/v2");
    sessionStorage.setItem("ver", "b");
  }

  window.location.reload();
}
```

## ğŸ” æœç´¢åŠŸèƒ½é…ç½®

é€šè¿‡å¼•å…¥ search.min.js æ’ä»¶ï¼Œå¹¶é…ç½®å¦‚ä¸‹ï¼Œå®ç°äº†å…¨æ–‡æœç´¢åŠŸèƒ½ï¼Œæ”¯æŒå…³é”®è¯é«˜äº®åŒ¹é…ä¸æ¨¡ç³ŠæŸ¥è¯¢ã€‚

**é…ç½®ä»£ç ï¼š**

```javascript
search: {
  maxAge: 86400000, // ä¸€å¤©ç¼“å­˜
  paths: "auto",
  placeholder: "è¯·è¾“å…¥å…³é”®è¯",
  noData: "æœªæ£€ç´¢åˆ°ç›¸å…³å†…å®¹!",
  depth: 2,
  hideOtherSidebarContent: false
}

```

## ğŸ“š è‡ªå®šä¹‰æµ®åŠ¨ç›®å½•ï¼ˆé”šç‚¹å¯¼èˆªï¼‰

Docsify é»˜è®¤åªæä¾›å·¦ä¾§æ–‡æ¡£ç›®å½•ï¼Œç°éœ€è¦å®ç°ä¸€ä¸ªå³ä¾§çš„æ–‡æ¡£å†…å®¹å¯¼èˆªç›®å½•ï¼Œé€šè¿‡è‡ªå®šä¹‰æ’ä»¶è¯»å–æ–‡æ¡£å†…å®¹ç”Ÿæˆç›®å½•ã€‚

å®ç°é€»è¾‘åŒ…æ‹¬ï¼š

- è·å– .content ä¸­æ‰€æœ‰ h1 ~ h3

- åŠ¨æ€ç”Ÿæˆç›®å½•åˆ—è¡¨å¹¶ç¼©è¿›

- è‡ªåŠ¨éšè—æ— æ ‡é¢˜é¡µé¢ç›®å½•

- ä¿®å¤é”šç‚¹è·³è½¬åç§»é—®é¢˜ï¼ˆæ’å…¥ç©ºçš„ <div>ï¼‰

**æ ¸å¿ƒæ’ä»¶ä»£ç ï¼š**

```javascript
hook.doneEach(function () {
  var floatingToc = document.querySelector(".floating-toc");
  if (!floatingToc) {
    floatingToc = document.createElement("div");
    floatingToc.className = "floating-toc";
    document.body.appendChild(floatingToc);
    var tocHeader = document.createElement("h2");
    tocHeader.textContent = "ç›®å½•";
    floatingToc.appendChild(tocHeader);
  }

  floatingToc.innerHTML = "<h2>ç›®å½•</h2>";
  var currentUrl = window.location.href.split("?")[0];
  var content = document.querySelector(".content");

  if (content) {
    var headers = content.querySelectorAll("h1, h2, h3");
    if (headers.length > 1) {
      floatingToc.style.display = "block";
      var tocList = document.createElement("ul");
      floatingToc.appendChild(tocList);
      headers.forEach(function (header) {
        var li = document.createElement("li");
        var level = parseInt(header.tagName.substring(1)) - 1;
        li.style.marginLeft = level * 20 + "px";

        var anchorLink = document.createElement("a");
        anchorLink.href = currentUrl + "#" + header.id;
        anchorLink.textContent = header.textContent;
        li.appendChild(anchorLink);
        tocList.appendChild(li);
      });
    } else {
      floatingToc.style.display = "none";
    }

    var anchors = document.querySelectorAll("h2[id],h3[id],h4[id]");
    anchors.forEach(function (anchor) {
      var fixAnchorDiv = document.createElement("div");
      fixAnchorDiv.className = "fix-anchor";
      fixAnchorDiv.id = anchor.id;
      anchor.parentNode.insertBefore(fixAnchorDiv, anchor);
      anchor.id = "";
    });
  } else {
    floatingToc.style.display = "none";
  }
});
```

## ğŸ“‹ ä»£ç å¤åˆ¶åŠŸèƒ½

æˆ‘ä»¬ä½¿ç”¨äº† docsify-copy-code æ’ä»¶ï¼Œç»™æ‰€æœ‰ä»£ç å—æ·»åŠ â€œç‚¹å‡»å¤åˆ¶â€æŒ‰é’®ã€‚

**å¼•å…¥æ’ä»¶ï¼š**

```javascript
<script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
```

**é…ç½®ï¼š**

```
copyCode: {
buttonText: "ç‚¹å‡»å¤åˆ¶",
errorText: "Error",
successText: "å¤åˆ¶æˆåŠŸ"
}
```

## âœ… æ€»ç»“

é€šè¿‡ç®€å•çš„ HTML + JS + æ’ä»¶ç»„åˆï¼Œæˆ‘ä»¬åœ¨åŸå§‹ Docsify çš„åŸºç¡€ä¸Šå®ç°äº†ä»¥ä¸‹åŠŸèƒ½ï¼š

- å¤šç‰ˆæœ¬åˆ‡æ¢æ”¯æŒ

- æœç´¢åŠŸèƒ½ä¼˜åŒ–

- æµ®åŠ¨ç›®å½•å¯¼èˆª

- ä¸€é”®å¤åˆ¶ä»£ç 

- UI æ›´åŠ ç¾è§‚æ¸…æ™°

### ğŸ§‘â€ğŸ’» åç»­è®¡åˆ’

- ğŸŒ æ”¯æŒå¤šè¯­è¨€å›½é™…åŒ–ï¼ˆi18nï¼‰

- ğŸŒ— ä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰² / æµ…è‰²æ¨¡å¼ï¼‰

- ğŸš€ ä¸ GitHub Actions ç­‰ CI/CD é›†æˆè‡ªåŠ¨éƒ¨ç½²

## æºç åœ°å€

https://github.com/Bing-b/docs
